# **C√°c M√πi Code L·∫°m D·ª•ng H∆∞·ªõng ƒê·ªëi T∆∞·ª£ng**

**Nh√≥m m√πi code n√†y vi ph·∫°m c√°c nguy√™n t·∫Øc c∆° b·∫£n c·ªßa l·∫≠p tr√¨nh h∆∞·ªõng ƒë·ªëi t∆∞·ª£ng, l√†m gi·∫£m t√≠nh linh ho·∫°t v√† d·ªÖ b·∫£o tr√¨ c·ªßa code.**

## **üìã Danh s√°ch c√°c M√πi Code**

### **1. C√¢u l·ªánh Switch (Switch Statements)**
**V·∫•n ƒë·ªÅ:** S·ª≠ d·ª•ng c√°c c√¢u l·ªánh `switch` ho·∫∑c `if-else` d√†i thay v√¨ t·∫≠n d·ª•ng t√≠nh ƒëa h√¨nh.

**H·∫≠u qu·∫£:**
- Vi ph·∫°m nguy√™n t·∫Øc M·ªü/ƒê√≥ng
- Kh√≥ m·ªü r·ªông v√† b·∫£o tr√¨
- Code tr√πng l·∫∑p ·ªü nhi·ªÅu n∆°i

**Gi·∫£i ph√°p:**
- S·ª≠ d·ª•ng ƒëa h√¨nh thay th·∫ø
- √Åp d·ª•ng State/Strategy Pattern
- Tri·ªÉn khai Factory Method

### **2. T·ª´ Ch·ªëi K·∫ø Th·ª´a (Refused Bequest)**
**V·∫•n ƒë·ªÅ:** L·ªõp con ch·ªâ s·ª≠ d·ª•ng m·ªôt ph·∫ßn nh·ªè c√°c ph∆∞∆°ng th·ª©c v√† thu·ªôc t√≠nh ƒë∆∞·ª£c k·∫ø th·ª´a t·ª´ l·ªõp cha.

**D·∫•u hi·ªáu nh·∫≠n bi·∫øt:**
- L·ªõp con override nhi·ªÅu ph∆∞∆°ng th·ª©c c·ªßa l·ªõp cha
- Quan h·ªá "is-a" kh√¥ng r√µ r√†ng

**Gi·∫£i ph√°p:**
- Thay th·∫ø k·∫ø th·ª´a b·∫±ng ·ªßy quy·ªÅn (delegation)
- T√°i c·∫•u tr√∫c h·ªá th·ªëng ph√¢n c·∫•p k·∫ø th·ª´a

### **3. Tr∆∞·ªùng T·∫°m Th·ªùi (Temporary Field)**
**V·∫•n ƒë·ªÅ:** C√°c tr∆∞·ªùng ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p c·ª• th·ªÉ, th∆∞·ªùng xuy√™n ·ªü tr·∫°ng th√°i null ho·∫∑c kh√¥ng c√≥ gi√° tr·ªã.

**T√°c h·∫°i:**
- Kh√≥ hi·ªÉu m·ª•c ƒë√≠ch s·ª≠ d·ª•ng c·ªßa tr∆∞·ªùng
- TƒÉng ƒë·ªô ph·ª©c t·∫°p kh√¥ng c·∫ßn thi·∫øt
- D·ªÖ g√¢y l·ªói runtime

**Gi·∫£i ph√°p:**
- Tr√≠ch xu·∫•t l·ªõp (Extract Class)
- Di chuy·ªÉn tr∆∞·ªùng v√† ph∆∞∆°ng th·ª©c li√™n quan

### **4. Quan h·ªá Th√¢n Thi·∫øt Qu√° M·ª©c (Feature Envy)**
**V·∫•n ƒë·ªÅ:** M·ªôt ph∆∞∆°ng th·ª©c truy c·∫≠p qu√° nhi·ªÅu d·ªØ li·ªáu c·ªßa ƒë·ªëi t∆∞·ª£ng kh√°c so v·ªõi d·ªØ li·ªáu c·ªßa ch√≠nh n√≥.

**Bi·ªÉu hi·ªán:**
- Ph∆∞∆°ng th·ª©c g·ªçi nhi·ªÅu getter c·ªßa ƒë·ªëi t∆∞·ª£ng kh√°c
- C√≥ v·∫ª "ghen t·ªã" v·ªõi d·ªØ li·ªáu c·ªßa l·ªõp kh√°c

**Gi·∫£i ph√°p:**
- Di chuy·ªÉn ph∆∞∆°ng th·ª©c (Move Method)
- Tr√≠ch xu·∫•t ph∆∞∆°ng th·ª©c (Extract Method)

## **üéØ Nguy√™n Nh√¢n Chung**

C√°c m√πi code n√†y th∆∞·ªùng xu·∫•t ph√°t t·ª´:

### **Thi·∫øt k·∫ø kh√¥ng ƒë√∫ng v·ªõi b·∫£n ch·∫•t OOP**
- S·ª≠ d·ª•ng c·∫•u tr√∫c th·ªß t·ª•c trong m√¥i tr∆∞·ªùng h∆∞·ªõng ƒë·ªëi t∆∞·ª£ng
- Kh√¥ng t·∫≠n d·ª•ng ƒë∆∞·ª£c t√≠nh ƒë√≥ng g√≥i, k·∫ø th·ª´a, ƒëa h√¨nh

### **√Åp d·ª•ng sai nguy√™n t·∫Øc SOLID**
- **S** (Single Responsibility): M·ªôt l·ªõp l√†m qu√° nhi·ªÅu vi·ªác
- **O** (Open/Closed): Kh√≥ m·ªü r·ªông m√† kh√¥ng s·ª≠a ƒë·ªïi code hi·ªán c√≥
- **L** (Liskov Substitution): L·ªõp con kh√¥ng th·ªÉ thay th·∫ø l·ªõp cha
- **I** (Interface Segregation): Interface qu√° l·ªõn v√† ph·ª©c t·∫°p
- **D** (Dependency Inversion): Ph·ª• thu·ªôc tr·ª±c ti·∫øp v√†o implementation

## **üõ† K·ªπ Thu·∫≠t T√°i C·∫•u Tr√∫c Ch√≠nh**

| M√πi Code | K·ªπ Thu·∫≠t T√°i C·∫•u Tr√∫c | M·∫´u Thi·∫øt K·∫ø √Åp D·ª•ng |
|----------|---------------------|-------------------|
| Switch Statements | Thay th·∫ø ƒëi·ªÅu ki·ªán b·∫±ng ƒëa h√¨nh | Strategy, State, Factory |
| Refused Bequest | Thay th·∫ø k·∫ø th·ª´a b·∫±ng ·ªßy quy·ªÅn | Composition over Inheritance |
| Temporary Field | Tr√≠ch xu·∫•t l·ªõp | Special Case, Null Object |
| Feature Envy | Di chuy·ªÉn ph∆∞∆°ng th·ª©c | - |

## **üìä V√≠ D·ª• T·ªïng H·ª£p**

### **V·∫•n ƒê·ªÅ: Switch Statement + Temporary Field**
```java
// ‚ùå Code c√≥ m√πi
class Employee {
    private String type;
    private double bonus; // Temporary field - ch·ªâ d√πng cho m·ªôt s·ªë type
    
    public double calculatePay() {
        switch (type) {
            case "REGULAR":
                return basePay + bonus;
            case "PART_TIME":
                return hourlyPay * hours;
            case "CONTRACTOR":
                return contractAmount;
            default:
                return 0;
        }
    }
}

// ‚úÖ Code sau khi t√°i c·∫•u tr√∫c
abstract class Employee {
    public abstract double calculatePay();
}

class RegularEmployee extends Employee {
    private double basePay;
    private double bonus;
    
    public double calculatePay() {
        return basePay + bonus;
    }
}

class PartTimeEmployee extends Employee {
    private double hourlyPay;
    private double hours;
    
    public double calculatePay() {
        return hourlyPay * hours;
    }
}
```

## **üí° L·ª£i √çch Khi Kh·∫Øc Ph·ª•c**

### **C·∫£i thi·ªán Ch·∫•t L∆∞·ª£ng Code**
- **T√≠nh module h√≥a cao**: M·ªói l·ªõp c√≥ tr√°ch nhi·ªám r√µ r√†ng
- **D·ªÖ b·∫£o tr√¨**: Thay ƒë·ªïi √≠t ·∫£nh h∆∞·ªüng ƒë·∫øn to√†n h·ªá th·ªëng
- **T√°i s·ª≠ d·ª•ng t·ªët**: C√°c th√†nh ph·∫ßn c√≥ th·ªÉ d√πng l·∫°i trong nhi·ªÅu ng·ªØ c·∫£nh

### **TƒÉng Hi·ªáu Su·∫•t Ph√°t Tri·ªÉn**
- **Gi·∫£m th·ªùi gian debug**: Code r√µ r√†ng, √≠t l·ªói ti·ªÅm ·∫©n
- **D·ªÖ onboard th√†nh vi√™n m·ªõi**: C·∫•u tr√∫c code d·ªÖ hi·ªÉu
- **Thu·∫≠n ti·ªán cho testing**: C√≥ th·ªÉ test t·ª´ng th√†nh ph·∫ßn ƒë·ªôc l·∫≠p

## **üö® Khi N√†o C√≥ Th·ªÉ B·ªè Qua?**

C√°c tr∆∞·ªùng h·ª£p c√≥ th·ªÉ ch·∫•p nh·∫≠n c√°c m√πi code n√†y:

- **Prototype/MVP**: Khi c·∫ßn deliver nhanh s·∫£n ph·∫©m th·ª≠ nghi·ªám
- **Code √≠t thay ƒë·ªïi**: C√°c th√†nh ph·∫ßn ·ªïn ƒë·ªãnh, √≠t khi c·∫ßn s·ª≠a ƒë·ªïi
- **R√†ng bu·ªôc performance**: Trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p ƒë·∫∑c bi·ªát c·∫ßn t·ªëi ∆∞u hi·ªáu nƒÉng
- **Integration code**: Khi l√†m vi·ªác v·ªõi third-party library ho·∫∑c legacy system

## **üîö K·∫øt Lu·∫≠n**

C√°c m√πi code "Object-Oriented Abusers" kh√¥ng ch·ªâ l√† v·∫•n ƒë·ªÅ k·ªπ thu·∫≠t m√† c√≤n ph·∫£n √°nh **s·ª± hi·ªÉu bi·∫øt ch∆∞a s√¢u v·ªÅ c√°c nguy√™n l√Ω h∆∞·ªõng ƒë·ªëi t∆∞·ª£ng**. Vi·ªác:

- üéØ **Nh·∫≠n di·ªán s·ªõm** c√°c d·∫•u hi·ªáu vi ph·∫°m
- üõ† **√Åp d·ª•ng ƒë√∫ng** k·ªπ thu·∫≠t t√°i c·∫•u tr√∫c  
- üìö **Hi·ªÉu r√µ b·∫£n ch·∫•t** c√°c nguy√™n l√Ω OOP

s·∫Ω gi√∫p x√¢y d·ª±ng h·ªá th·ªëng **linh ho·∫°t, d·ªÖ b·∫£o tr√¨ v√† c√≥ kh·∫£ nƒÉng m·ªü r·ªông cao** theo th·ªùi gian.
